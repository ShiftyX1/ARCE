# ARCE (Advanced RayCast Engine)

Простой движок для 2.5D игр в стиле Doom/Wolfenstein, написанный на Java.

## Что это вообще такое?

ARCE - это игровой движок, который рендерит псевдо-3D мир используя raycasting и BSP. Проще говоря, делает игру как старый Doom, но на Java и с современными плюшками типа консоли и редактора уровней.

## Что уже работает

- **Движок игры** - основной рендеринг, физика игрока, текстуры
- **Редактор уровней** - рисование карт мышкой, сохранение в JSON формате
- **Система карт** - загрузка/сохранение уровней
- **Игровая консоль** - как в Quake, открывается на тильду (`)
- **Менеджер карт** - управление загрузкой карт через консоль

## Как запустить

Нужна Java 17+ и Maven.

```bash
# Основная игра
mvn compile exec:java -Pgame

# Редактор уровней
mvn compile exec:java -Peditor
```

## Управление в игре

- **WASD** - движение
- **Стрелки / Q,E** - поворот
- **M** - переключить вид сверху
- **`** (тильда) - открыть/закрыть консоль
- **ESC** - выход

## Консольные команды

- `maps` - список доступных карт
- `map название` - загрузить карту (например: `map test_map.json`)
- `testmap` - загрузить встроенную тестовую карту
- `mapinfo` - инфа о текущей карте
- `switch название` - переключиться на уже загруженную карту
- `help` - справка по командам
- `clear` - очистить консоль

## Как работают карты

Карты хранятся в папке `maps/` в формате JSON. Можно создавать в редакторе или описывать вручную.

### Формат файла карты
```json
{
  "metadata": {
    "name": "Название карты",
    "author": "Автор", 
    "description": "Описание"
  },
  "playerStart": {
    "x": 100, "y": 100,
    "angle": 0
  },
  "sectors": [
    {
      "floorHeight": 0,
      "ceilingHeight": 64,
      "lightLevel": 1.0,
      "walls": [
        {
          "startX": 50, "startY": 50,
          "endX": 150, "endY": 50,
          "textureId": "wall_1",
          "hasPortal": false
        }
      ]
    }
  ]
}
```

## Редактор уровней

Запускается через `mvn compile exec:java -Peditor`.

**Управление:**
- **Левая кнопка мыши** - рисование стен/секторов
- **G** - включить/выключить сетку
- **D** - режим диагоналей (45°, 90°, и т.д.)
- **ESC** - отменить текущее действие
- **Enter** - завершить рисование сектора

**Режимы:**
- **SELECT** - выбор объектов
- **DRAW_WALL** - рисование отдельных стен
- **DRAW_SECTOR** - рисование секторов (комнат)
- **SET_PLAYER** - установка стартовой позиции игрока

## Структура проекта

```
src/main/java/com/arce/
├── core/                 # Ядро движка
│   ├── Engine.java       # Основной движок
│   ├── Window.java       # Окно игры
│   ├── console/          # Игровая консоль
│   └── managers/         # Менеджеры (карты, ассеты, спрайты)
├── world/                # Игровой мир
│   ├── GameMap.java      # Карта игры
│   ├── MapLoader.java    # Загрузка карт
│   └── MapSaver.java     # Сохранение карт
├── render/               # Рендеринг
│   ├── Renderer.java     # Основной рендерер
│   └── RayCaster.java    # Raycasting
├── editor/               # Редактор уровней
└── player/               # Игрок и камера
```

## Зависимости

- **Java 17+**
- **Maven** для сборки
- **Gson** для JSON (автоматически скачается)
- **SLF4J + Logback** для логов

## TODO (что можно добавить)

- [ ] Звуки
- [ ] Враги и ИИ  
- [ ] Больше текстур
- [ ] Анимированные спрайты
- [ ] Скрипты для карт
- [ ] Физика объектов

---

Проект делался для фана, так что если что-то сломается - это нормально :)))

Если интересно поиграться с кодом - welcome!